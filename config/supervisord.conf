[supervisord]
logfile=data/supervisor/supervisord.log
pidfile=data/supervisor/supervisord.pid
strip_ansi=true

[program:postgres]
command=postgres -c config_file=config/postgres.conf -D data/postgres
stopsignal=INT
stdout_logfile=data/supervisor/postgres.log
stderr_logfile=data/supervisor/postgres.log

[program:redis]
command=redis-server config/redis.conf
stopsignal=INT
stdout_logfile=data/supervisor/redis.log
stderr_logfile=data/supervisor/redis.log

[program:spamassassin]
command=spamd --listen 127.0.0.1:8783 --max-children 1
stopsignal=INT
stdout_logfile=data/supervisor/spamassassin.log
stderr_logfile=data/supervisor/spamassassin.log

[program:mailpit]
command=mailpit -d data/mailpit.db --enable-spamassassin 127.0.0.1:8783 --smtp-auth-accept-any --smtp-auth-allow-insecure
stopsignal=INT
stdout_logfile=data/supervisor/mailpit.log
stderr_logfile=data/supervisor/mailpit.log

[program:watch-js]
command=nix-shell --pure --run "watch-js"
stopsignal=TERM
stdout_logfile=data/supervisor/watch-js.log
stderr_logfile=data/supervisor/watch-js.log

[program:watch-locale]
command=nix-shell --pure --run "watch-locale"
stopsignal=TERM
stdout_logfile=data/supervisor/watch-locale.log
stderr_logfile=data/supervisor/watch-locale.log

[program:watch-sass]
command=nix-shell --pure --run "watch-sass"
stopsignal=TERM
stdout_logfile=data/supervisor/watch-sass.log
stderr_logfile=data/supervisor/watch-sass.log
